---
layout: page
title: 工作紀錄
permalink: /track/
---
{% assign tracksByDate = site.data.tracks_json | group_by:"date" %}
<script>

function getMap(){ // 產生tag
  
  var tagsmap = {};
  var tags = document.getElementsByClassName("chip");
  for(let tag = 0; tag < tags.length; tag++) 
  {
    let tagtrim = tags[tag].innerHTML.trim();
    if(tagtrim in tagsmap) // counting tag's number
    {
      tagsmap[tagtrim] = tagsmap[tagtrim] + 1;
    }
    else
    {
      tagsmap[tagtrim] = 1;
    }
  }

  var tagHtml = '<ul class="tags">';
  for (let tagIndex in tagsmap) {
    tagHtml +=`
    <li>
      <span>
        <a href="#" class="tag" onClick="tagFilter(this, '${tagIndex}')">
          ${tagIndex}
          <span class="n_tag">${tagsmap[tagIndex]}</span>
        </a>
      </span>
    </li>`;
  }
  tagHtml += '</ul>'
  
  document.getElementById("tagsBlock").innerHTML = tagHtml;
}

function tagFilter(element, tag) {

  if(!$(element).hasClass('highlight')) {
    // highlight tag
    $('.tag').removeClass('highlight')
    $(element).addClass('highlight')

    // activate filtering(hide items) when a tag was clicked
    $('.track-item').hide()
    $('.track-item').has(`.chip:contains(${tag})`).show(function () {
      $(this).children('.collection-item').hide()
      $(this).children('.collection-item').has(`.chip:contains(${tag})`).show()
    })
  }
  else {
    // reset filtering
    $('.tag').removeClass('highlight')
    $('.track-item').show()
    $('collection-item').show()
  }
}

document.addEventListener('DOMContentLoaded', function(){ 
  getMap();
}, false);

</script>

<div class="section container center">
  <div id="tagsBlock"></div>
</div>

<div class="tracks section">
  
  <div class="collection">
    {% for dateGroup in tracksByDate %}
    <div class='track-item'>
      
      <!-- start a new date markup -->
      <div class="group-date" style="font-size: 18px;">{{ dateGroup.name }}</div>
      
      {% for track in dateGroup.items %}
      <div class="row collection-item" style="border-bottom: 1.5px solid #efebe9;">
        <div class="col s12 m3 l2">
          {% for tag in track.tags %}
          <div class="chip">
            {{ tag }}
          </div>
          {% endfor %}
        </div>
        
        <div class="col s12 m5 l6">
          <h5 class="title">{{ track.title }}</h5>
        </div>
        
        <div class="col s12 m4 l4">
          {% for item in track.content %}
            {% for link in item %}
            <a href='{{ link[1] }}' class="waves-effect waves-light btn">{{ link[0] }}</a>
            {% endfor %}
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>

    {% endfor %}
    
  </div>

</div>
